#ifndef OUTPUT_FRAG_H
#define OUTPUT_FRAG_H

#ifdef __cplusplus
extern "C" {
#endif

static const char OUTPUT_FRAG[] = "#version 330 core\n#define M_PI 3.1415926535897931\n#define M_TAU 6.2831853071795862\n#define M_INV_PI .3183098861837907\nvec3 M_Rotate3D(vec3 v,vec4 q){vec3 t=2.*cross(q.xyz,v);return v+q.w*t+cross(q.xyz,t);}mat3 M_OrthonormalBasis(vec3 n){float sgn=n.z>=0.?1.:-1.;float a=-1./(sgn+n.z);float b=n.x*n.y*a;vec3 t=vec3(1.+sgn*n.x*n.x*a,sgn*b,-sgn*n.x);vec3 bt=vec3(b,sgn+n.y*n.y*a,-n.y);return mat3(t,bt,n);}vec2 M_OctahedronWrap(vec2 val){return(1.-abs(val.yx))*mix(vec2(-1.),vec2(1.),vec2(greaterThanEqual(val.xy,vec2(0.))));}vec3 M_DecodeOctahedral(vec2 encoded){encoded=encoded*2.-1.;vec3 normal;normal.z=1.-abs(encoded.x)-abs(encoded.y);normal.xy=normal.z>=0.?encoded.xy:M_OctahedronWrap(encoded.xy);return normalize(normal);}vec2 M_EncodeOctahedral(vec3 normal){normal/=abs(normal.x)+abs(normal.y)+abs(normal.z);normal.xy=normal.z>=0.?normal.xy:M_OctahedronWrap(normal.xy);normal.xy=normal.xy*.5+.5;return normal.xy;}vec3 M_NormalScale(vec3 normal,float scale){normal.xy*=scale;normal.z=sqrt(1.-clamp(dot(normal.xy,normal.xy),0.,1.));return normal;}float M_HashIGN(vec2 pos){const vec3 magic=vec3(0.06711056,0.00583715,52.9829189);return fract(magic.z*fract(dot(pos,magic.xy)));\n}\n#define TONEMAP_LINEAR 0\n#define TONEMAP_REINHARD 1\n#define TONEMAP_FILMIC 2\n#define TONEMAP_ACES 3\n#define TONEMAP_AGX 4\nnoperspective in vec2 vTexCoord;uniform sampler2D uTexColor;uniform float uTonemapExposure;uniform float uTonemapWhite;uniform float uBrightness;uniform float uContrast;uniform float uSaturation;out vec4 FragColor;vec3 TonemapReinhard(vec3 color,float pWhite){float whiteSquared=pWhite*pWhite;vec3 whiteSquaredColor=whiteSquared*color;return(whiteSquaredColor+color*color)/(whiteSquaredColor+whiteSquared);}vec3 TonemapFilmic(vec3 color,float pWhite){const float exposureBias=2.;const float A=.22*exposureBias*exposureBias;const float B=.30*exposureBias;const float C=.10;const float D=.20;const float E=0.01;const float F=.30;vec3 colorTonemapped=((color*(A*color+C*B)+D*E)/(color*(A*color+B)+D*F))-E/F;float pWhiteTonemapped=((pWhite*(A*pWhite+C*B)+D*E)/(pWhite*(A*pWhite+B)+D*F))-E/F;return colorTonemapped/pWhiteTonemapped;}vec3 TonemapACES(vec3 color,float pWhite){const float exposureBias=1.8;const float A=0.0245786;const float B=0.000090537;const float C=.983729;const float D=.432951;const float E=.238081;const mat3 rgb_to_rrt=mat3(vec3(.59719*exposureBias,.35458*exposureBias,0.04823*exposureBias),vec3(0.07600*exposureBias,.90834*exposureBias,0.01566*exposureBias),vec3(0.02840*exposureBias,.13383*exposureBias,.83777*exposureBias));const mat3 odt_to_rgb=mat3(vec3(1.60475,-.53108,-0.07367),vec3(-.10208,1.10813,-0.00605),vec3(-0.00327,-0.07276,1.07602));color*=rgb_to_rrt;vec3 colorTonemapped=(color*(color+A)-B)/(color*(C*color+D)+E);colorTonemapped*=odt_to_rgb;pWhite*=exposureBias;float pWhiteTonemapped=(pWhite*(pWhite+A)-B)/(pWhite*(C*pWhite+D)+E);return colorTonemapped/pWhiteTonemapped;}vec3 AgXContrastApprox(vec3 x){vec3 x2=x*x;vec3 x4=x2*x2;return 0.021*x+4.0111*x2-25.682*x2*x+70.359*x4-74.778*x4*x+27.069*x4*x2;}vec3 TonemapAgX(vec3 color){const mat3 srgbToRec2020AgxInsetMat=mat3(.54490813676363087053,.14044005884001287035,0.088827411851915368603,.37377945959812267119,.75410959864013760045,.17887712465043811023,0.081384976686407536266,.10543358536857773485,.73224999956948382528);const mat3 agxOutsetRec2020ToSrgbMatrix=mat3(1.9645509602733325934,-.29932243390911083839,-.16436833806080403409,-.85585845117807513559,1.3264510741502356555,-.23822464068860595117,-.10886710826831608324,-0.027084020983874825605,1.402665347143271889);const float minEV=-12.4739311883324;const float maxEV=4.02606881166759;color=max(color,2e-10);color=srgbToRec2020AgxInsetMat*color;color=clamp(log2(color),minEV,maxEV);color=(color-minEV)/(maxEV-minEV);color=AgXContrastApprox(color);color=pow(color,vec3(2.4));color=agxOutsetRec2020ToSrgbMatrix*color;return color;}vec3 Tonemapping(vec3 color,float exposure,float pWhite){\n color*=exposure;\n#if TONEMAPPER == TONEMAP_REINHARD\n color=TonemapReinhard(max(vec3(0.),color),pWhite);\n#elif TONEMAPPER == TONEMAP_FILMIC\n color=TonemapFilmic(max(vec3(0.),color),pWhite);\n#elif TONEMAPPER == TONEMAP_ACES\n color=TonemapACES(max(vec3(0.),color),pWhite);\n#elif TONEMAPPER == TONEMAP_AGX\n color=TonemapAgX(color);\n#endif\n return color;}vec3 Adjustments(vec3 color,float brightness,float contrast,float saturation){color=mix(vec3(0.),color,brightness);color=mix(vec3(.5),color,contrast);color=mix(vec3(dot(vec3(1.),color)*.33333),color,saturation);return color;}vec3 Debanding(vec3 color){float ditherStrength=255.;return color+vec3((M_HashIGN(gl_FragCoord.xy)-.5)/ditherStrength);}vec3 LinearToSRGB(vec3 color){return max(vec3(1.055)*pow(color,vec3(.416666667))-vec3(0.055),vec3(0.));}void main(){vec3 color=texture(uTexColor,vTexCoord).rgb;color=Tonemapping(color,uTonemapExposure,uTonemapWhite);color=Adjustments(color,uBrightness,uContrast,uSaturation);color=Debanding(color);FragColor=vec4(LinearToSRGB(color),1.);}";

#define OUTPUT_FRAG_SIZE 4971

#ifdef __cplusplus
}
#endif

#endif // OUTPUT_FRAG_H
